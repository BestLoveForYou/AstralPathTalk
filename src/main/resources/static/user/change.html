<html>
	<head>
		<meta charset="utf-8">
		<script src="/webjars/jquery/jquery.js"></script>
		<link href="/css/index.css" rel="stylesheet" type="text/css" />
		<link href="/css/text.css" rel="stylesheet" type="text/css" />
		<link href="/css/tanchuang.css" rel="stylesheet" type="text/css" />
		<title>AstralPath - 星途</title>
		<script src="/js/tanchuang.js"></script>
		<script src="/webjars/jquery/jquery.min.js"></script>
    	<script src="/webjars/sockjs-client/sockjs.min.js"></script>
    	<script src="/webjars/stomp-websocket/stomp.min.js"></script>
		<script>
	    function createXMLHTTPObject(){
	        var XMLHttpFactories = [// 兼容不同浏览器和版本的创建函数数组
	            function () {return new XMLHttpRequest()},
	            function () {return new ActiveXObject("Msxml2.XMLHTTP")},
	            function () {return new ActiveXObject("Msxml3.XMLHTTP")},
	            function () {return new ActiveXObject("Microsoft.XMLHTTP")},
	        ];
	        var xmlhttp = false;
	        for (var i = 0; i < XMLHttpFactories.length; i ++ ){ 
	    	//尝试调用匿名函数，如果成功则返回XMLHttpRequest对象，否则继续调用下一个
	            try{
	                xmlhttp = XMLHttpFactories[i]();
	            }catch (e){
	                continue; 			// 如果发生异常，则继续下一个函数调用
	            }
	            break; 					// 如果成功，则中止循环
	        }
	        return xmlhttp; 				// 返回对象实例
	    }
	    

		</script>
	</head>
	<body>
		
		<header class="f">AstralPath - 星途
		</header>
		<section>
    	<article>
    	<div class="textBox">
    		
    		<script>
    		var xmlHttp = createXMLHTTPObject();
	    	var url = "getUserLogin"; 
	    	xmlHttp.open("POST",url, false);
	    	xmlHttp.setRequestHeader('Content-type','application/x-www-form-urlencoded');	
	    	xmlHttp.send("callback=functionName");
	    	var obj = JSON.parse(xmlHttp.responseText);
	    	//1.设置内容。
	    	
	    	if(obj.username == undefined) {
	    		window.location.href="/user/index.html";
	    	} else {
				document.write("<p>用户名:</p><input type='text' id='username' value=" + obj.username+ "></input>");
				document.write("<button id='change1' type='button' onclick='cu()''>更改</button>");
				document.write("<p>密码:</p><input type='text' id='password'></input>");
				document.write("<button id='change2' type='button' onclick='cp()''>更改</button>");
			}
    		function cu() {
    			var x=  document.getElementById("username").value//获取输入框元素
    			url = "change/username?username=" + x; 
    	    	xmlHttp.open("GET",url, false);
    	    	xmlHttp.setRequestHeader('Content-type','application/x-www-form-urlencoded');	
    	    	xmlHttp.send("callback=functionName");
    	    	alert("成功!");
    		}
			function cp() {
				var y=  document.getElementById("password").value//获取输入框元素
    			url = "change/password?password=" + y; 
    	    	xmlHttp.open("GET",url, false);
    	    	xmlHttp.setRequestHeader('Content-type','application/x-www-form-urlencoded');	
    	    	xmlHttp.send("callback=functionName");
    	    	alert("成功!");
    		}
    		</script>
    		
    		
			<iframe id="iframe" name="iframe" style="display:none;"></iframe>
			</div>
    	 </article>
		<nav>
			 <a href="/" class="a">星途永恒</a>
			 <br>
			 <br>
			 <a href="/user/index.html" class="b">用户</a><br>
			 <a href="/text/index.html" class="b">文章</a><br><br>
			 			 <a href="/user/login.html" class="b">登录</a><br>
			 <a href="/user/reg.html" class="b">注册</a>	
			 <br>
			 <a href="/user/change.html" class="b">编辑用户信息</a>
			 <br>
			 <a href="/user/logout" class="b">登出</a>
			 <br>

			 <br>
			 <a href="/markdown/index.html" class="b">Markdown编辑器</a><br>
			 <a href="/chat.html" class="b">公共聊天室</a>
			 <br>

		</nav>
   		<aside>
			
		</aside>
		</section>
		<footer>
			<p>鄂ICP备2021014649号</p>
		</footer>

	</body>

</html>